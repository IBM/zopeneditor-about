import{r as i,o as n,a,b as e,d as s,F as r,e as t,c}from"./app.16cdc755.js";import{_ as l}from"./plugin-vue_export-helper.21dcd24c.js";const d={},p=e("h1",{id:"migrating-from-ibm-wazi-for-dev-spaces",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#migrating-from-ibm-wazi-for-dev-spaces","aria-hidden":"true"},"#"),t(" Migrating from IBM Wazi for Dev Spaces")],-1),h=e("p",null,"If you are migrating from IBM Wazi for Dev Spaces to Red Hat OpenShift Dev Spaces on the same cluster then you must completely delete the existing Wazi deployment before you can deploy Red Hat's Dev Spaces as the two cannot be co-installed on the same cluster. This documentation details the steps to follow to uninstall IBM Wazi for Dev Spaces 4.0.0 provided by IBM.",-1),u=e("h2",{id:"prerequisites",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#prerequisites","aria-hidden":"true"},"#"),t(" Prerequisites")],-1),m=e("li",null,[e("p",null,"Log in to your OpenShift\xAE cluster web console as a cluster administrator.")],-1),f=t("An active "),v={href:"https://docs.openshift.com/container-platform/4.17/cli_reference/openshift_cli/getting-started-cli.html",target:"_blank",rel:"noopener noreferrer"},g=t("oc"),_=t(" session with administrative permissions to the destination OpenShift Cluster."),b={href:"https://docs.redhat.com/en/documentation/red_hat_openshift_dev_spaces/3.18/html/administration_guide/installing-devspaces#installing-devspaces",target:"_blank",rel:"noopener noreferrer"},w=t("dsc"),k=t(" the command line tool for Red Hat OpenShift Dev Spaces."),z=c('<h2 id="procedure-using-the-command-line" tabindex="-1"><a class="header-anchor" href="#procedure-using-the-command-line" aria-hidden="true">#</a> Procedure using the command line</h2><ol><li><p>Commit and push all the necessary changes to the Git repository from your Wazi for Dev Spaces workspace to prevent any data loss during the removal process. Backup important files like Zowe team configuration files for users with Zowe projects in persistent storage if required.</p></li><li><p>To validate if there are any Dev Spaces containers present on the Cluster, click the Hamburger icon on the top right of the OpenShift web console, select Observe in the sidebar and choose Metrics. Ensure the value of count returned is 0, when the expression <code>count(container_processes{namespace=~&#39;.+-devspaces\\\\W\\\\w+&#39;, container=~&#39;wazi&#39;})</code> is run in the query bar to ensure no one is using an active workspace.</p></li><li><p>Login into the cluster using the <code>oc login</code> command and run <code>dsc server:delete --delete-all</code> . Proceed with caution as this command will uninstall the Wazi for Dev Spaces and Dev Workspace operators, delete Webhooks, delete devworkspaces.workspace.devfile.io resources, delete the devworkspace-operator-fast-redhat-operators-openshift-marketplace subscription, and remove all other workloads, services, subscriptions, RBAC, ImageContentSourcePolicy and other resources linked to the Dev Spaces operator.</p></li><li><p>The Wazi License CR has to be manually deleted in the workspace installation namespace, you can run this command with the oc client <code>oc delete WaziLicense wazi-devspaces-license</code>. Then run the command <code>oc delete crd WaziLicense</code> to get rid of the License CRD.</p></li><li><p>Uninstall the operator by unsubscribing the operator to the <code>openshift operator</code> namespace using <code>oc get subscription ibm-wazi-code -n openshift-operators -o yaml | grep currentCSV</code> to get the <code>currentCSV</code> name. Then delete the current subscription using <code>oc delete subscription ibm-wazi-code -n openshift-operators</code>.</p></li><li><p>Delete the Cluster Service Version using the <code>CSV name</code> retrieved from the previous step using <code>oc delete clusterserviceversion &lt;currentCSV&gt; -n openshift-operators</code>.</p></li></ol><p>IBM Wazi for Dev Spaces is uninstalled and you can install Redhat Openshift Dev Spaces.</p><h2 id="procedure-using-the-openshift-console" tabindex="-1"><a class="header-anchor" href="#procedure-using-the-openshift-console" aria-hidden="true">#</a> Procedure using the OpenShift console</h2><ol><li><p>Navigate to the <code>openshift-operators</code> namespace using the projects dropdown in the Administrator section. Click on <code>Operators</code> in the side menu and select installed operators under the drop down. The two operators we are interested in are IBM Wazi for Dev Spaces 4.0.0 provided by IBM and the Dev Workspace operator 0.31.2 provided by Red Hat.</p></li><li><p>Click on the IBM Wazi for Dev Spaces Operator, Navigate to the <code>all-instances</code> tab on the top of the console. Delete all the custom resources listed. Two resources that are often present for an active workspace are the <code>wazi-devspaces</code> CR of type CheCluster and the <code>wazi-devspaces-license</code> of type WaziLicense. To delete, click the ellipsis icon on the right of wazi-devspaces row and select <code>Delete CheCluster</code>. For wazi devspaces license select <code>delete WaziLicense</code>.</p></li><li><p>Once the custom resources have been deleted, delete the operator by clicking the kebab menu on the right of IBM Wazi for Dev Spaces row in the Install Operator page.</p></li><li><p>Click on the Dev Workspace Operator in the installed operators page. Navigate to the <code>all-instances</code> tab. Delete all the custom resources listed.</p></li><li><p>Unsubscribe the operator to the <code>openshift-operators</code> namespace. Follow the steps below to uninstall the IBM Wazi for Dev Spaces Operator and Red Hat DevWorkspace Operator(delete subscription).</p><ol><li><p>Expand the Operators menu on the left and click Installed Operators.</p></li><li><p>Click the three dots at the side of IBM Wazi for Dev Spaces and choose uninstall operator. Give it some time until the Operators are uninstalled.</p></li></ol></li><li><p>The Wazi License Custom Resource Definition remains on the cluster. Take these steps to delete the Wazi License CRD:</p><ol><li><p>Expand the Home menu on the left and click Search. Type the keyword CRD in the search bar.</p></li><li><p>Scroll down to the bottom and delete the CRD with name WaziLicense of type org.eclipse.che.</p></li></ol></li><li><p>To ensure your cluster is not utilizing any unnecessary resources delete all the projects/namespaces with <code>devspaces-[uid]</code> appended to them e.g: <code>john-doe-ibm-com-devspaces-i74n78</code>.</p></li></ol><p>IBM Wazi for Dev Spaces is uninstalled and you can install Redhat Openshift Dev Spaces.</p><h2 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting" aria-hidden="true">#</a> Troubleshooting</h2>',7),S=t("If there is an issue pertaining to deleting any workspace related resources. Remove the dependant "),y={href:"https://kubernetes.io/docs/concepts/overview/working-with-objects/finalizers/",target:"_blank",rel:"noopener noreferrer"},D=t("finalizers"),W=t(" and ensure it does not block the deletion of dependant resources.");function C(I,O){const o=i("ExternalLinkIcon");return n(),a(r,null,[p,h,u,e("ol",null,[m,e("li",null,[e("p",null,[f,e("a",v,[g,s(o)]),_])]),e("li",null,[e("p",null,[e("a",b,[w,s(o)]),k])])]),z,e("p",null,[S,e("a",y,[D,s(o)]),W])],64)}var x=l(d,[["render",C]]);export{x as default};
